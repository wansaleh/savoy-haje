jQuery(function($){if("undefined"==typeof wc_cart_params)return!1;var t=function(t){return wc_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",t)},e=function(t){return t.is(".processing")||t.parents(".processing").length},o=function(t){e(t)||t.addClass("processing").block({message:null,overlayCSS:{background:"rgba(0,0,0,.6)"}})},c=function(t){t.removeClass("processing").unblock()},i=function(t){var e=$.parseHTML(t),o=$(".shop_table.cart",e).closest("form"),c=$(".cart_totals",e),i=$(".woocommerce-error",e),r=$(".woocommerce-message",e),s=$(".woocommerce-info",e);if($(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),0===o.length){if($(".woocommerce-checkout").length)return void window.location.reload();var p=$(".cart-empty",e).closest(".woocommerce");$(".shop_table.cart").closest(".woocommerce").replaceWith(p),i.length>0&&n(i,$(".cart-empty").closest(".woocommerce")),r.length>0&&n(r,$(".cart-empty").closest(".woocommerce")),s.length>0&&n(s,$(".cart-empty").closest(".woocommerce"))}else $(".woocommerce-checkout").length&&$(document.body).trigger("update_checkout"),$(".shop_table.cart").closest("form").replaceWith(o),$(".shop_table.cart").closest("form").find('input[name="update_cart"]').prop("disabled",!0),i.length>0&&n(i),r.length>0&&n(r),s.length>0&&n(s),a(c);$(document.body).trigger("updated_wc_div")},a=function(t){$(".cart_totals").replaceWith(t),$(document.body).trigger("updated_cart_totals")},n=function(t,e){e||(e=$(".shop_table.cart").closest("form")),$(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),e.before(t)},r={init:function(t){this.cart=t,this.toggle_shipping=this.toggle_shipping.bind(this),this.shipping_method_selected=this.shipping_method_selected.bind(this),this.shipping_calculator_submit=this.shipping_calculator_submit.bind(this),$(document).on("click",".shipping-calculator-button",this.toggle_shipping),$(document).on("change","select.shipping_method, input[name^=shipping_method]",this.shipping_method_selected),$(document).on("submit","form.woocommerce-shipping-calculator",this.shipping_calculator_submit),$(".shipping-calculator-form").hide()},toggle_shipping:function(){return $(".shipping-calculator-form").slideToggle("slow"),!1},shipping_method_selected:function(e){var i=e.currentTarget,n={};$("select.shipping_method, input[name^=shipping_method][type=radio]:checked, input[name^=shipping_method][type=hidden]").each(function(){n[$(i).data("index")]=$(i).val()}),o($("div.cart_totals"));var r={security:wc_cart_params.update_shipping_method_nonce,shipping_method:n};$.ajax({type:"post",url:t("update_shipping_method"),data:r,dataType:"html",success:function(t){a(t)},complete:function(){c($("div.cart_totals")),$(document.body).trigger("updated_shipping_method")}})},shipping_calculator_submit:function(t){t.preventDefault();var e=$(t.currentTarget);o($("div.cart_totals")),o(e),$("<input />").attr("type","hidden").attr("name","calc_shipping").attr("value","x").appendTo(e),$.ajax({type:e.attr("method"),url:e.attr("action"),data:e.serialize(),dataType:"html",success:function(t){i(t)},complete:function(){c(e),c($("div.cart_totals"))}})}},s={init:function(){this.update_cart_totals=this.update_cart_totals.bind(this),this.input_keypress=this.input_keypress.bind(this),this.cart_submit=this.cart_submit.bind(this),this.submit_click=this.submit_click.bind(this),this.apply_coupon=this.apply_coupon.bind(this),this.remove_coupon_clicked=this.remove_coupon_clicked.bind(this),this.quantity_update=this.quantity_update.bind(this),this.item_remove_clicked=this.item_remove_clicked.bind(this),this.update_cart=this.update_cart.bind(this),$(document).on("wc_update_cart",this.update_cart),$(document).on("click","div.woocommerce > form input[type=submit]",this.submit_click),$(document).on("keypress","div.woocommerce > form input[type=number]",this.input_keypress),$(document).on("submit","div.woocommerce:not(.widget_product_search) > form",this.cart_submit),$(document).on("click","a.woocommerce-remove-coupon",this.remove_coupon_clicked),$(document).on("click","td.product-remove > a",this.item_remove_clicked),$(document).on("change input","div.woocommerce > form .cart_item :input",this.input_changed),$('div.woocommerce > form input[name="update_cart"]').prop("disabled",!0)},input_changed:function(){$('div.woocommerce > form input[name="update_cart"]').prop("disabled",!1)},update_cart:function(){var t=$(".shop_table.cart").closest("form");o(t),o($("div.cart_totals")),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"html",success:function(t){i(t)},complete:function(){c(t),c($("div.cart_totals"))}})},update_cart_totals:function(){o($("div.cart_totals")),$.ajax({url:t("get_cart_totals"),dataType:"html",success:function(t){a(t)},complete:function(){c($("div.cart_totals"))}})},input_keypress:function(t){13===t.keyCode&&(t.preventDefault(),this.cart_submit(t))},cart_submit:function(t){var o=$(document.activeElement),c=$("input[type=submit][clicked=true]"),i=$(t.currentTarget);return i.is("form")||(i=$(t.currentTarget).parents("form")),0!==i.find(".shop_table.cart").length&&(!e(i)&&void(c.is('[name="update_cart"]')||o.is("input.qty")?(t.preventDefault(),this.quantity_update(i)):(c.is('[name="apply_coupon"]')||o.is("#coupon_code"))&&(t.preventDefault(),this.apply_coupon(i))))},submit_click:function(t){$("input[type=submit]",$(t.target).parents("form")).removeAttr("clicked"),$(t.target).attr("clicked","true")},apply_coupon:function(e){o(e);var i=this,a=$("#coupon_code"),r=a.val(),s={security:wc_cart_params.apply_coupon_nonce,coupon_code:r};$.ajax({type:"POST",url:t("apply_coupon"),data:s,dataType:"html",success:function(t){n(t),$(document.body).trigger("applied_coupon")},complete:function(){c(e),a.val(""),i.update_cart_totals()}})},remove_coupon_clicked:function(e){e.preventDefault();var i=this,a=$(e.currentTarget).parents("tr"),r=$(e.currentTarget).attr("data-coupon");o(a.parents("table"));var s={security:wc_cart_params.remove_coupon_nonce,coupon:r};$.ajax({type:"POST",url:t("remove_coupon"),data:s,dataType:"html",success:function(t){n(t),$(document.body).trigger("removed_coupon"),c(a.parents("table"))},complete:function(){i.update_cart_totals()}})},quantity_update:function(t){$("<input />").attr("type","hidden").attr("name","update_cart").attr("value","Update Cart").appendTo(t),o(t),o($("div.cart_totals")),$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"html",success:i,complete:function(){c(t),c($("div.cart_totals"))}})},item_remove_clicked:function(t){t.preventDefault();var e=$(t.currentTarget),a=e.parents("form");o(a),o($("div.cart_totals")),$.ajax({type:"GET",url:e.attr("href"),dataType:"html",success:i,complete:function(){c(a),c($("div.cart_totals"))}})}};r.init(s),s.init()});