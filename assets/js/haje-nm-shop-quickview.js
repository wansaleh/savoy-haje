!function($){"use strict";$.extend($.nmTheme,{quickview_init:function(){var e=this,n=$("#nm-quickview"),a=$('<div id="nm-quickview-overlay" class="mfp-bg nm-mfp-fade-in"></div>'),i;e.$body.on("click",".nm-quickview-btn",function(n){n.preventDefault(),i=$(this).data("product_id"),i&&(e.$html.css("width","auto"),a.appendTo(e.$body),a.addClass("show mfp-ready nm-loader"),o())});var o=function(){var o,c={product_id:i};"undefined"!=typeof wc_add_to_cart_params?o=wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","nm_ajax_load_product"):(o=nm_wp_vars.ajaxUrl,c.action="nm_ajax_load_product"),window.nm_quickview_get_product=$.ajax({type:"POST",url:o,data:c,dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},beforeSend:function(){"object"==typeof window.nm_quickview_get_product&&window.nm_quickview_get_product.abort()},error:function(n,i,o){console.log("NM: AJAX error - _qvLoadProduct() - "+o),e.$html.css("width",""),a.removeClass("mfp-ready mfp-removing").remove()},success:function(o){n.html(o);var c=n.children("#product-"+i),r=c.find("form.cart"),s=$("#nm-quickview-slider").find("img").last();s.one("load",function(){if(c.hasClass("product-variable")){r.wc_variation_form().find(".variations select:eq(0)").change(),e.shopCustomSelect&&r.find("select").selectOrDie(e.shopSelectConfig);var n=r.children(".single_variation_wrap").children(".single_variation");e.shopCheckVariationDetails(n),n.on("show_variation",function(){e.shopCheckVariationDetails($(this))}),r.on("woocommerce_variation_select_change",function(){e.qvHasSlider&&e.$qvSlider.slick("slickGoTo",0,!1)})}e.quantityInputsBindButtons($("#nm-qv-product-summary"));var o=wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","haje_hex_terms");window.haje_nm_qv_ajax_hex=$.ajax({type:"GET",url:o,data:{product_id:i},dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},beforeSend:function(){"object"==typeof window.haje_nm_qv_ajax_hex&&window.haje_nm_qv_ajax_hex.abort()},error:function(n,i,o){console.log("HAJE: NM: AJAX error - _qvLoadProduct() - "+o),e.$html.css("width",""),a.removeClass("mfp-ready mfp-removing").remove()},success:function(e){window._haje_hex=e,Haje.WC_Variation_Swatches.init("#nm-qv-product-summary")}}),t()})}})},t=function(){$.magnificPopup.open({mainClass:"nm-mfp-quickview nm-mfp-fade-in",closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,items:{src:n,type:"inline"},callbacks:{open:function(){a.removeClass("nm-loader"),c(),a.one("touchstart.qv",function(){$.magnificPopup.close()})},beforeClose:function(){a.addClass("mfp-removing")},close:function(){e.$html.css("width",""),a.removeClass("mfp-ready mfp-removing").remove()}}})},c=function(){e.qvHasSlider=!1,e.$qvSlider=$("#nm-quickview-slider"),e.$qvSlider.children().length>1&&(e.qvHasSlider=!0,e.$qvSlider.slick({prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-right"></i></a>',dots:!1,infinite:!1,speed:350}))}}}),$.nmThemeExtensions.quickview=$.nmTheme.quickview_init}(jQuery);