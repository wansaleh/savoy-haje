!function($){"use strict";$.extend($.nmTheme,{quickview_init:function(){var e=this,i=$("#nm-quickview"),n=$('<div id="nm-quickview-overlay" class="mfp-bg nm-mfp-fade-in"></div>'),o;e.$body.on("click",".nm-quickview-btn",function(i){i.preventDefault(),o=$(this).data("product_id"),o&&(e.$html.css("width","auto"),n.appendTo(e.$body),n.addClass("show mfp-ready nm-loader"),a())});var a=function(){var a,c={product_id:o};"undefined"!=typeof wc_add_to_cart_params?a=wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","nm_ajax_load_product"):(a=nm_wp_vars.ajaxUrl,c.action="nm_ajax_load_product"),window.nm_quickview_get_product=$.ajax({type:"POST",url:a,data:c,dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},beforeSend:function(){"object"==typeof window.nm_quickview_get_product&&window.nm_quickview_get_product.abort()},error:function(i,o,a){console.log("NM: AJAX error - _qvLoadProduct() - "+a),e.$html.css("width",""),n.removeClass("mfp-ready mfp-removing").remove()},success:function(n){i.html(n);var a=i.children("#product-"+o),c=a.find("form.cart"),r=$("#nm-quickview-slider").find("img").last();r.one("load",function(){if(a.hasClass("product-variable")){c.wc_variation_form().find(".variations select:eq(0)").change(),e.shopCustomSelect&&c.find("select").selectOrDie(e.shopSelectConfig);var i=c.children(".single_variation_wrap").children(".single_variation");e.shopCheckVariationDetails(i),i.on("show_variation",function(){e.shopCheckVariationDetails($(this))}),c.on("woocommerce_variation_select_change",function(){e.qvHasSlider&&e.$qvSlider.slick("slickGoTo",0,!1)})}e.quantityInputsBindButtons($("#nm-qv-product-summary")),t()})}})},t=function(){$.magnificPopup.open({mainClass:"nm-mfp-quickview nm-mfp-fade-in",closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,items:{src:i,type:"inline"},callbacks:{open:function(){n.removeClass("nm-loader"),Haje.WC_Variation_Swatches.init("#nm-qv-product-summary"),c(),n.one("touchstart.qv",function(){$.magnificPopup.close()})},beforeClose:function(){n.addClass("mfp-removing")},close:function(){e.$html.css("width",""),n.removeClass("mfp-ready mfp-removing").remove()}}})},c=function(){e.qvHasSlider=!1,e.$qvSlider=$("#nm-quickview-slider"),e.$qvSlider.children().length>1&&(e.qvHasSlider=!0,e.$qvSlider.slick({prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-thin-right"></i></a>',dots:!1,infinite:!1,speed:350}))}}}),$.nmThemeExtensions.quickview=$.nmTheme.quickview_init}(jQuery);