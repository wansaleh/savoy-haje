(function(){"use strict";var $,t,e;$=jQuery,e=$.localStorage,$.fn.bgOverlay=function(t){return null==t&&(t={}),this.each(function(){var e;return e=$('<div class="bg-overlay"></div>').css(t),$(this).prepend(e).css({position:"relative"}),e})},t=function(t,e){var n;return n=null,$.each(t,function(t,r){if(t.toLowerCase()===e.toLowerCase())return n=r,!1}),n},window.Haje=function(){function t(){$("#nm-footer").bgOverlay()}return t}(),Haje.Alert=function(){function t(){this.setupAlert(),window._alert=window.alert,window.alert=function(t){return function(e){return t.showAlert(e)}}(this)}return t.prototype.setupAlert=function(){return this.overlay=$('<div class="haje-alert-overlay"></div>'),this.alert=$('<div class="haje-alert"><div class="haje-alert-content"></div><div class="haje-alert-action"><a href="#">Close</a></div></div>'),this.alertContent=this.alert.find(".haje-alert-content"),this.actionButton=this.alert.find(".haje-alert-action > a"),this.actionButton.click(function(t){return function(e){return e.stopPropagation(),t.overlay.removeClass("show")}}(this)),this.overlay.click(function(t){return function(e){return e.stopPropagation(),t.overlay.removeClass("show")}}(this)),this.alert.click(function(t){return t.stopPropagation()}),$("body").append(this.overlay.append(this.alert))},t.prototype.showAlert=function(t){return null==t&&(t="Test"),this.alertContent.html(t),this.overlay.addClass("show"),$(document).on("keyup",function(t){return function(e){if(27===e.keyCode)return t.overlay.removeClass("show"),$(document).off("keyup")}}(this))},t}(),Haje.WC=function(){function t(){var t;t=$(".nm-product-thumbnails-col, .nm-product-images-col, .nm-product-summary-col, .nm-single-product-right-col"),t.imagesLoaded(function(){return t.matchHeight({property:"min-height"})})}return t}(),Haje.WC.Forms=function(){function t(){$("form .form-row").find("input, textarea, select, label").focus(function(){return $(this).closest(".form-row").addClass("focus")}).blur(function(){return $(this).closest(".form-row").removeClass("focus")}),$('p[class^="comment-form-"]').find("input, textarea, select, label").focus(function(){return $(this).closest('p[class^="comment-form-"]').addClass("focus")}).blur(function(){return $(this).closest('p[class^="comment-form-"]').removeClass("focus")})}return t}(),Haje.WC.VariationSwatches=function(){function n(){this.init($("#nm-product-summary"))}return n.prototype.init=function(t){if($(t).find("table.variations .nm-variation-row").length)return this.replaceSelect(t),this.toggleVariations(t)},n.prototype.replaceSelect=function(t){var e;return e=this,$(t).find("table.variations .nm-variation-row").each(function(){var t,n,r,o,a,i;return a=$(this).addClass("haje-swatch"),n=a.children(".label"),i=a.children(".value"),n.children("label").wrapInner('<div class="label-count"></div>').append('<div class="label-display"></div>'),r=n.find(".label-count"),o=n.find(".label-display"),t=i.children("select"),t.togglebutton({removeFirst:!0}),$.each(t.data(),function(e,n){if("string"==typeof n)return t.data("group").attr("data-"+e,n.replace(/^attribute_/,""))}),t.change(function(){return t.val()?(o.text(t.val()),o.data("original-label",t.val())):o.data("original-label","")}),t.data("buttons").hover(function(){return o.data("original-label",o.text()),o.text($(this).text())},function(){return o.text(o.data("original-label"))}),"color"!==a.data("attribute_name")&&"pa_color"!==a.data("attribute_name")||(e.colorizeSwatch(t.data("buttons")),t.data("buttons").sort(function(t,n){var r,o,a,i;return o=$(t).attr("value"),r=tinycolor(e.colorFromName(o)),i=$(n).attr("value"),a=tinycolor(e.colorFromName(i)),a.getBrightness()-r.getBrightness()}),t.data("buttons").detach().appendTo(t.data("group"))),r.html("<strong>"+t.data("buttons").length+"</strong> "+r.text()+"s")})},n.prototype.colorizeSwatch=function(t){var e;return e=this,t.each(function(){var t;return t=e.colorFromName($(this).attr("value")),$(this).css({backgroundColor:"#"+t})})},n.prototype.toggleVariations=function(t){return $(t).find("table.variations .nm-variation-row").each(function(){var t,n,r,o;return r=$(this),n=r.children(".label"),o=r.children(".value"),t=r.data("attribute_name"),e.get("haje_open_variation_"+$(this).data("attribute_name"))&&$(this).addClass("open"),n.click(function(){var n;return n=$(this).next(".value"),r.hasClass("open")?(r.removeClass("open"),e.set("haje_open_variation_"+t,!1)):(r.addClass("open"),e.set("haje_open_variation_"+t,!0))})})},n.prototype.colorFromName=function(e){var n,r,o,a;if("undefined"!=typeof _haje_hex&&null!==_haje_hex)return tinycolor(t(_haje_hex,e)).toHex();for(a=ntc.names,n=0,r=a.length;n<r;n++)if(o=a[n],e.toLowerCase().trim()===o[1].toLowerCase())return o[0];return!1},n}(),Haje.WC.ColorCart=function(){function t(){this.init()}return t.prototype.init=function(){return this.colorizeTags(),$(document.body).on("updated_checkout",function(t){return function(){return t.colorizeTags()}}(this)),$(document.body).on("wc_fragments_refreshed",function(t){return function(){return t.colorizeTags()}}(this)),$(document.body).on("added_to_cart",function(t){return function(){return t.colorizeTags()}}(this))},t.prototype.colorizeTags=function(){var t;return t=this,$(".cart_item, .mini_cart_item").find(".variation-Color:last-child p").each(function(){var e,n,r;return r=$(this).html(),n=$(this).closest(".cart_item, .mini_cart_item").attr("class").match(/product-id-(\d+)/)[1],e=t.colorFromName(r,n),$(this).parent().addClass(tinycolor(e).getBrightness()<180?"dark":"light"),$(this).parent().css({background:"#"+e,borderColor:"#"+e})})},t.prototype.colorFromName=function(t,e){var n,r,o,a;if(null==e&&(e=null),e&&"undefined"!=typeof _haje_cart_hex&&null!==_haje_cart_hex&&_haje_cart_hex[e])return tinycolor(_haje_cart_hex[e][t]).toHex();for(a=ntc.names,n=0,r=a.length;n<r;n++)if(o=a[n],$.trim(t.toLowerCase())===o[1].toLowerCase())return o[0];return!1},t}(),Haje.WC.PaymentMethods=function(){function t(){this.init(),$(document).ajaxSuccess(function(t){return function(){return t.init()}}(this)),$(document.body).on("updated_checkout",function(t){return function(){return t.init()}}(this))}return t.prototype.init=function(){return $("#payment").each(function(){return 1===$(this).find(".wc_payment_method").length?$(this).children("ul").addClass("single-method"):$(this).children("ul").addClass("multiple-method")})},t}(),$(function(){return new Haje,new Haje.Alert,new Haje.WC,new Haje.WC.Forms,Haje.WC_Variation_Swatches=new Haje.WC.VariationSwatches,new Haje.WC.ColorCart,new Haje.WC.PaymentMethods})}).call(this);
//# sourceMappingURL=./haje.js.map