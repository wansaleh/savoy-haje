(function(){"use strict";var $,t,n;$=jQuery,n=$.localStorage,$.fn.bgOverlay=function(t){return null==t&&(t={}),this.each(function(){var n;return n=$('<div class="bg-overlay"></div>').css(t),$(this).prepend(n).css({position:"relative"}),n})},t=function(t,n){var e;return e=null,$.each(t,function(t,r){if(t.toLowerCase()===n.toLowerCase())return e=r,!1}),e},window.Haje=function(){function t(){}return t}(),Haje.Home=function(){function t(){}return t}(),Haje.Alert=function(){function t(){this.setupAlert(),window._alert=window.alert,window.alert=function(t){return function(n){return t.showAlert(n)}}(this)}return t.prototype.setupAlert=function(){return this.overlay=$('<div class="haje-alert-overlay"></div>'),this.alert=$('<div class="haje-alert"><div class="haje-alert-content"></div><div class="haje-alert-action"><a href="#">Close</a></div></div>'),this.alertContent=this.alert.find(".haje-alert-content"),this.actionButton=this.alert.find(".haje-alert-action > a"),this.actionButton.click(function(t){return function(n){return n.stopPropagation(),t.overlay.removeClass("show")}}(this)),this.overlay.click(function(t){return function(n){return n.stopPropagation(),t.overlay.removeClass("show")}}(this)),this.alert.click(function(t){return t.stopPropagation()}),$("body").append(this.overlay.append(this.alert))},t.prototype.showAlert=function(t){return null==t&&(t="Test"),this.alertContent.html(t),this.overlay.addClass("show"),$(document).on("keyup",function(t){return function(n){if(27===n.keyCode)return t.overlay.removeClass("show"),$(document).off("keyup")}}(this))},t}(),Haje.WC=function(){function t(){var t;t=$(".nm-product-thumbnails-col, .nm-product-images-col, .nm-product-summary-col, .nm-single-product-right-col"),t.imagesLoaded(function(){return t.matchHeight({property:"min-height"})})}return t}(),Haje.WC.Forms=function(){function t(){$("form .form-row").find("input, textarea, select, label").focus(function(){return $(this).closest(".form-row").addClass("focus")}).blur(function(){return $(this).closest(".form-row").removeClass("focus")}),$('p[class^="comment-form-"]').find("input, textarea, select, label").focus(function(){return $(this).closest('p[class^="comment-form-"]').addClass("focus")}).blur(function(){return $(this).closest('p[class^="comment-form-"]').removeClass("focus")}),$("form .wpas-form-group").find("input, textarea, select, label").focus(function(){return $(this).closest(".wpas-form-group").addClass("focus")}).blur(function(){return $(this).closest(".wpas-form-group").removeClass("focus")})}return t}(),Haje.WC.Filters=function(){function t(){this.init()}return t.prototype.init=function(){var t,n,e;return t=$(".nm_widget_color_filter"),e=$(t).find(".nm-widget-title"),n=e.text(),t.data("original-title",n),$(t).find(".wc-layered-nav-term a").each(function(){return $(this).hover(function(t){return function(){return e.text($(t).children("i")[0].nextSibling.nodeValue)}}(this),function(n){return function(){return e.text(t.data("original-title"))}}(this))})},t}(),Haje.WC.VariationSwatches=function(){function t(){this.init("#nm-product-summary"),Haje.WC_Variation_Swatches=this}return t.prototype.init=function(t){if($(t).find("table.variations .nm-variation-row").length)return this.replaceSelect(t),this.toggleVariations(t)},t.prototype.replaceSelect=function(t){var n;return n=this,$(t).find("table.variations .nm-variation-row").each(function(){var t,e,r,i,o,a;return o=$(this).addClass("haje-swatch"),e=o.children(".label"),a=o.children(".value"),e.children("label").wrapInner('<div class="label-count"></div>').append('<div class="label-display"></div>'),r=e.find(".label-count"),i=e.find(".label-display"),t=a.children("select"),t.togglebutton({removeFirst:!0,onChange:function(n,e){return t.val()?(i.text(e),i.data("original-label",e)):i.data("original-label","")}}),$.each(t.data(),function(n,e){if("string"==typeof e)return t.data("group").attr("data-"+n,e.replace(/^attribute_/,""))}),t.data("buttons").hover(function(){return i.data("original-label",i.text()),i.text($(this).text())},function(){return i.text(i.data("original-label"))}),"color"!==o.data("attribute_name")&&"pa_color"!==o.data("attribute_name")||(n.colorizeSwatch(t.data("buttons")),t.data("buttons").sort(function(t,n){var e,r;return e=tinycolor($(t).data("hex")),r=tinycolor($(n).data("hex")),r.getBrightness()-e.getBrightness()}),t.data("buttons").detach().appendTo(t.data("group"))),r.html("<strong>"+t.data("buttons").length+"</strong> "+r.text()+"s")})},t.prototype.colorizeSwatch=function(t){var n;return n=this,t.each(function(){var t;return t=$(this).data("hex"),$(this).css({backgroundColor:"#"+t})})},t.prototype.toggleVariations=function(t){return $(t).find("table.variations .nm-variation-row").each(function(){var t,e,r,i;return r=$(this),e=r.children(".label"),i=r.children(".value"),t=r.data("attribute_name"),n.get("haje_open_variation_"+$(this).data("attribute_name"))&&$(this).addClass("open"),e.click(function(){var e;return e=$(this).next(".value"),r.hasClass("open")?(r.removeClass("open"),n.set("haje_open_variation_"+t,!1)):(r.addClass("open"),n.set("haje_open_variation_"+t,!0))})})},t}(),Haje.WC.ColorCart=function(){function t(){this.init()}return t.prototype.init=function(){return this.colorizeTags(),$(document.body).on("updated_checkout",function(t){return function(){return t.colorizeTags()}}(this)),$(document.body).on("wc_fragments_refreshed",function(t){return function(){return t.colorizeTags()}}(this)),$(document.body).on("added_to_cart",function(t){return function(){return t.colorizeTags()}}(this))},t.prototype.colorizeTags=function(){var t;return t=this,$(".cart_item, .mini_cart_item").find(".variation-Color:last-child p").each(function(){var t,n,e;return e=$(this).html(),n=$(this).closest(".cart_item, .mini_cart_item").attr("class").match(/product-id-(\d+)/)[1],t=$(this).parent().data("hex"),$(this).parent().addClass(tinycolor(t).getBrightness()<180?"dark":"light"),$(this).parent().css({background:"#"+t,borderColor:"#"+t})})},t}(),Haje.WC.PaymentMethods=function(){function t(){this.init(),$(document).ajaxSuccess(function(t){return function(){return t.init()}}(this)),$(document.body).on("updated_checkout",function(t){return function(){return t.init()}}(this))}return t.prototype.init=function(){return $("#payment").each(function(){return 1===$(this).find(".wc_payment_method").length?$(this).children("ul").addClass("single-method"):$(this).children("ul").addClass("multiple-method")})},t}(),Haje.Support=function(){function t(){$(".support-menu-button > a").bind("click",function(t){t.preventDefault(),$("#nm-login-wrap").children(".login").css("display",""),$.magnificPopup.open({mainClass:"nm-login-popup nm-mfp-fade-in",alignTop:!0,closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,items:{src:"#nm-login-popup-wrap",type:"inline"},callbacks:{close:function(){$("#nm-login-wrap").addClass("inline fade-in slide-up"),$("#nm-register-wrap").removeClass("inline fade-in slide-up")}}})})}return t}(),$(function(){return new Haje,new Haje.Home,new Haje.Alert,new Haje.WC,new Haje.WC.Forms,new Haje.WC.Filters,new Haje.WC.VariationSwatches,new Haje.WC.ColorCart,new Haje.WC.PaymentMethods})}).call(this);
//# sourceMappingURL=./haje.js.map