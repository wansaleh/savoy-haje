!function($){$.fn.theiaStickySidebar=function(i){function t(i,t){var e=o(i,t);e||(console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),$(document).scroll(function(i,t){return function(e){var a=o(i,t);a&&$(this).unbind(e)}}(i,t)),$(window).resize(function(i,t){return function(e){var a=o(i,t);a&&$(this).unbind(e)}}(i,t)))}function o(i,t){return i.initialized===!0||!($("body").width()<i.minWidth)&&(e(i,t),!0)}function e(i,t){i.initialized=!0,$("head").append($('<style>.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>')),t.each(function(){function t(){e.fixedScrollTop=0,e.sidebar.css({"min-height":"1px"}),e.stickySidebar.css({position:"static",width:"",transform:"none"})}function o(i){var t=i.height();return i.children().each(function(){t=Math.max(t,$(this).height())}),t}var e={};if(e.sidebar=$(this),e.options=i||{},e.container=$(e.options.containerSelector),0==e.container.length&&(e.container=e.sidebar.parent()),e.sidebar.parents().css("-webkit-transform","none"),e.sidebar.css({position:"relative",overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),e.stickySidebar=e.sidebar.find(".theiaStickySidebar"),0==e.stickySidebar.length){var n=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i;e.sidebar.find("script").filter(function(i,t){return 0===t.type.length||t.type.match(n)}).remove(),e.stickySidebar=$("<div>").addClass("theiaStickySidebar").append(e.sidebar.children()),e.sidebar.append(e.stickySidebar)}e.marginBottom=parseInt(e.sidebar.css("margin-bottom")),e.paddingTop=parseInt(e.sidebar.css("padding-top")),e.paddingBottom=parseInt(e.sidebar.css("padding-bottom"));var d=e.stickySidebar.offset().top,r=e.stickySidebar.outerHeight();e.stickySidebar.css("padding-top",1),e.stickySidebar.css("padding-bottom",1),d-=e.stickySidebar.offset().top,r=e.stickySidebar.outerHeight()-r-d,0==d?(e.stickySidebar.css("padding-top",0),e.stickySidebarPaddingTop=0):e.stickySidebarPaddingTop=1,0==r?(e.stickySidebar.css("padding-bottom",0),e.stickySidebarPaddingBottom=0):e.stickySidebarPaddingBottom=1,e.previousScrollTop=null,e.fixedScrollTop=0,t(),e.onScroll=function(e){if(e.stickySidebar.is(":visible")){if($("body").width()<e.options.minWidth)return void t();if(e.options.disableOnResponsiveLayouts){var n=e.sidebar.outerWidth("none"==e.sidebar.css("float"));if(n+50>e.container.width())return void t()}var d=$(document).scrollTop(),r="static";if(d>=e.sidebar.offset().top+(e.paddingTop-e.options.additionalMarginTop)){var s=e.paddingTop+i.additionalMarginTop,c=e.paddingBottom+e.marginBottom+i.additionalMarginBottom,p=e.sidebar.offset().top,b=e.sidebar.offset().top+o(e.container),l=0+i.additionalMarginTop,f,h=e.stickySidebar.outerHeight()+s+c<$(window).height();f=h?l+e.stickySidebar.outerHeight():$(window).height()-e.marginBottom-e.paddingBottom-i.additionalMarginBottom;var g=p-d+e.paddingTop,u=b-d-e.paddingBottom-e.marginBottom,S=e.stickySidebar.offset().top-d,y=e.previousScrollTop-d;"fixed"==e.stickySidebar.css("position")&&"modern"==e.options.sidebarBehavior&&(S+=y),"stick-to-top"==e.options.sidebarBehavior&&(S=i.additionalMarginTop),"stick-to-bottom"==e.options.sidebarBehavior&&(S=f-e.stickySidebar.outerHeight()),S=y>0?Math.min(S,l):Math.max(S,f-e.stickySidebar.outerHeight()),S=Math.max(S,g),S=Math.min(S,u-e.stickySidebar.outerHeight());var m=e.container.height()==e.stickySidebar.outerHeight();r=(m||S!=l)&&(m||S!=f-e.stickySidebar.outerHeight())?d+S-e.sidebar.offset().top-e.paddingTop<=i.additionalMarginTop?"static":"absolute":"fixed"}if("fixed"==r)e.stickySidebar.css({position:"fixed",width:a(e.stickySidebar)+"px",transform:"translateY("+S+"px)",left:e.sidebar.offset().left+parseInt(e.sidebar.css("padding-left"))+"px",top:"0px"});else if("absolute"==r){var k={};"absolute"!=e.stickySidebar.css("position")&&(k.position="absolute",k.transform="translateY("+(d+S-e.sidebar.offset().top-e.stickySidebarPaddingTop-e.stickySidebarPaddingBottom)+"px)",k.top="0px"),k.width=a(e.stickySidebar)+"px",k.left="",e.stickySidebar.css(k)}else"static"==r&&t();"static"!=r&&1==e.options.updateSidebarHeight&&e.sidebar.css({"min-height":e.stickySidebar.outerHeight()+e.stickySidebar.offset().top-e.sidebar.offset().top+e.paddingBottom}),e.previousScrollTop=d}},e.onScroll(e),$(document).scroll(function(i){return function(){i.onScroll(i)}}(e)),$(window).resize(function(i){return function(){i.stickySidebar.css({position:"static"}),i.onScroll(i)}}(e))})}function a(i){var t;try{t=i[0].getBoundingClientRect().width}catch(i){}return"undefined"==typeof t&&(t=i.width()),t}var n={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern"};i=$.extend(n,i),i.additionalMarginTop=parseInt(i.additionalMarginTop)||0,i.additionalMarginBottom=parseInt(i.additionalMarginBottom)||0,t(i,this)}}(jQuery);